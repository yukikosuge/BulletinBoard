{"ast":null,"code":"// ./src/helpers/useCreateThread.js\nimport { firestore } from 'firebase/app';\nimport { useState } from 'react';\nexport const useCreateThread = () => {\n  const [loading, setLoading] = useState(false);\n\n  const createResponse = async ({\n    text,\n    title,\n    username\n  }) => {\n    if (loading) return;\n    setLoading(true);\n    const now = firestore.Timestamp.now();\n    const threadRef = firestore().collection('threads').doc();\n    await threadRef.set({\n      createdAt: now,\n      updatedAt: now,\n      title,\n      responseCount: 1\n    });\n    const responseRef = threadRef.collection('responses').doc();\n    await responseRef.set({\n      createdAt: now,\n      updatedAt: now,\n      threadId: threadRef.id,\n      username,\n      text\n    });\n    setLoading(false);\n  };\n\n  return [createResponse, loading];\n};","map":{"version":3,"sources":["/Users/kosugeyuki/Desktop/techpit-forum/src/helpers/useCreateThread.js"],"names":["firestore","useState","useCreateThread","loading","setLoading","createResponse","text","title","username","now","Timestamp","threadRef","collection","doc","set","createdAt","updatedAt","responseCount","responseRef","threadId","id"],"mappings":"AAAA;AAEA,SAASA,SAAT,QAA0B,cAA1B;AACA,SAASC,QAAT,QAAyB,OAAzB;AAEA,OAAO,MAAMC,eAAe,GAAG,MAAM;AACnC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAC,KAAD,CAAtC;;AAEA,QAAMI,cAAc,GAAG,OAAO;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,GAAP,KAAqC;AAC1D,QAAIL,OAAJ,EAAa;AAEbC,IAAAA,UAAU,CAAC,IAAD,CAAV;AAEA,UAAMK,GAAG,GAAGT,SAAS,CAACU,SAAV,CAAoBD,GAApB,EAAZ;AAEA,UAAME,SAAS,GAAGX,SAAS,GAAGY,UAAZ,CAAuB,SAAvB,EAAkCC,GAAlC,EAAlB;AAEA,UAAMF,SAAS,CAACG,GAAV,CAAc;AAClBC,MAAAA,SAAS,EAAEN,GADO;AAElBO,MAAAA,SAAS,EAAEP,GAFO;AAGlBF,MAAAA,KAHkB;AAIlBU,MAAAA,aAAa,EAAE;AAJG,KAAd,CAAN;AAOA,UAAMC,WAAW,GAAGP,SAAS,CAACC,UAAV,CAAqB,WAArB,EAAkCC,GAAlC,EAApB;AAEA,UAAMK,WAAW,CAACJ,GAAZ,CAAgB;AACpBC,MAAAA,SAAS,EAAEN,GADS;AAEpBO,MAAAA,SAAS,EAAEP,GAFS;AAGpBU,MAAAA,QAAQ,EAAER,SAAS,CAACS,EAHA;AAIpBZ,MAAAA,QAJoB;AAKpBF,MAAAA;AALoB,KAAhB,CAAN;AAQAF,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GA3BD;;AA6BA,SAAO,CAACC,cAAD,EAAiBF,OAAjB,CAAP;AACD,CAjCM","sourcesContent":["// ./src/helpers/useCreateThread.js\n\nimport { firestore } from 'firebase/app'\nimport { useState } from 'react'\n\nexport const useCreateThread = () => {\n  const [loading, setLoading] = useState(false)\n\n  const createResponse = async ({ text, title, username }) => {\n    if (loading) return\n\n    setLoading(true)\n\n    const now = firestore.Timestamp.now()\n\n    const threadRef = firestore().collection('threads').doc()\n\n    await threadRef.set({\n      createdAt: now,\n      updatedAt: now,\n      title,\n      responseCount: 1,\n    })\n\n    const responseRef = threadRef.collection('responses').doc()\n\n    await responseRef.set({\n      createdAt: now,\n      updatedAt: now,\n      threadId: threadRef.id,\n      username,\n      text,\n    })\n\n    setLoading(false)\n  }\n\n  return [createResponse, loading]\n}"]},"metadata":{},"sourceType":"module"}